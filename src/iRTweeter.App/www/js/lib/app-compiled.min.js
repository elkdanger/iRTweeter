!function(e){e.moduleName="irtweeter",e.connection=$.connection.hub.start(),e.AppServices=$.connection.appHub,e.AppServices.client.signOut=function(){},angular.module(e.moduleName,["ngRoute"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"/views/index.html",controller:"HomeController"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsController"}).when("/about",{templateUrl:"/views/about.html",controller:"AboutController"}).otherwise({redirectTo:"/"})}]).directive("spinner",function(){return{templateUrl:"/directives/spinner.html"}})}(window.App=window.App||{}),$(function(){$("body").on("click","[external]",function(e){e.preventDefault(),window.open(this.href)})}),function(){angular.module(App.moduleName).controller("AboutController",["$scope",function(){}])}(),function(){angular.module(App.moduleName).controller("HeaderController",["$scope","AuthenticationService","AppService",function(e){e.isConnected=!1,App.connection.done(function(){App.AppServices.server.getAuthenticatedUser().done(function(n){e.$apply(function(){n&&(e.isConnected=!0,e.authInfo={username:n.ScreenName,name:n.Name,url:n.Url,imageUrl:n.ProfileImageUrl})})})})}])}(),function(){angular.module(App.moduleName).controller("HomeController",["$scope","AuthenticationService",function(e,n){e.user=null,e.simConnected=!1,n.getUser().then(function(n){n&&(e.user=n)})}])}(),function(){angular.module(App.moduleName).controller("SettingsController",["$scope","$http","AuthenticationService","AppService",function(e,n){e.saved=!1,App.connection.done(function(){App.AppServices.server.getAuthenticatedUser().done(function(n){e.$apply(function(){e.isConnectedToTwitter=void 0!=n,n&&(e.authInfo={username:n.ScreenName,name:n.Name,url:n.Url,imageUrl:n.ProfileImageUrl})})})}),App.AppServices.client.signOut=function(){console.log("Signed out")},n.get("/api/settings").success(function(n){e.settings=n}),e.save=function(t){e.saved=!1,n.put("/api/settings",t).success(function(){e.saved=!0,e.settingsForm.$setPristine()})},e.signOut=function(){App.AppServices.server.signOut()},e.twitterAuth=function(){var e=location.protocol+"//"+location.host+"#/settings",n="/api/auth/external?redirect_uri="+e;window.location=n}}])}(),function(){angular.module(App.moduleName).service("AppService",["$rootScope","$q",function(e){return{connect:function(){var n=this;return connection=$.hubConnection(),this.proxy=connection.createHubProxy("appHub"),connection.start().done(function(){e.connected=!0,console.log(n.proxy)})},getAuthenticatedUser:function(){return this.proxy.invoke("getAuthenticatedUser")}}}])}(window.App=window.App||{}),function(){angular.module(App.moduleName).service("AuthenticationService",["$http","$rootScope","$q",function(e,n,t){var o=function(){this.user=null};return o.prototype={init:function(){var t=this;return e.get("/api/auth/user").success(function(e){t.user=e,n.$broadcast("socialConnected",e)})},getUser:function(){var e=t.defer();return null!=this.user?e.resolve(this.user):this.init().success(function(n){e.resolve(n)}).error(function(){e.reject()}),e.promise}},new o}])}();